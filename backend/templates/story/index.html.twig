{% extends 'base.html.twig' %}

{% block title %}Histoires{% endblock %}

{% block body %}
    <div style="max-width: 800px; margin: 0 auto; padding: 1rem;">

    <article class="card">
    <div style="display:flex; justify-content:flex-end; gap:8px; margin-bottom: 12px;">
        <a class="btn" href="{{ path('app_home') }}">Retour à l'accueil</a>
        {% if app.user %}
        <a class="btn" href="{{ path('app_story_new') }}">Écrire une nouvelle histoire</a>
        {% endif %}
    </div>
    <h1>Toutes les histoires</h1>
    
    {% if stories|length > 0 %}
        <ul>
            {% for story in stories %}
                <li>
                    <a href="{{ path('app_story_show', {'id': story.id}) }}">{{ story.title }}</a>
                    — par {{ story.user ? story.user.displayName : 'Anonyme' }}
                    — {{ story.createdAt ? story.createdAt|date('d/m/Y') : '' }}
                    {% if app.user and app.user == story.user %}
                        <a href="{{ path('app_story_edit', {'id': story.id}) }}">Modifier</a>
                    {% endif %}
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>Aucune histoire pour l'instant.</p>
    {% endif %}
    </article>
    
    </div>
    
{% endblock %}
